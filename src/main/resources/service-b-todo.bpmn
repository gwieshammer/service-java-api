<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1vxop94" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.1.2">
  <bpmn:collaboration id="Collaboration_1qw6fwu">
    <bpmn:participant id="pr-service-b-todo" name="Service-B Todo" processRef="service-b-todo" />
  </bpmn:collaboration>
  <bpmn:process id="service-b-todo" name="service b todo" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1hb66cb">
      <bpmn:lane id="Lane_1xv8pyl">
        <bpmn:flowNodeRef>start-service-todo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_01ms3wl</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>check-items</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>me-item-done</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>st-check-if-items-open</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>gw-items-open</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>catch-todo-end</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>exclusive-todo-finished</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0zu1yuy</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="start-service-todo" name="Start Service Todo">
      <bpmn:outgoing>SequenceFlow_16iky1x</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="EndEvent_01ms3wl">
      <bpmn:incoming>exclusive-todo-finished-yes</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_16iky1x" sourceRef="start-service-todo" targetRef="check-items" />
    <bpmn:sequenceFlow id="SequenceFlow_1guxlgj" sourceRef="check-items" targetRef="me-item-done" />
    <bpmn:sequenceFlow id="SequenceFlow_0zqawc1" sourceRef="me-item-done" targetRef="st-check-if-items-open" />
    <bpmn:sequenceFlow id="gw-items-open-yes" name="yes" sourceRef="gw-items-open" targetRef="ExclusiveGateway_0zu1yuy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${itemsOpen}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="gw-items-open-no" name="no" sourceRef="gw-items-open" targetRef="catch-todo-end" />
    <bpmn:sequenceFlow id="SequenceFlow_1htjrmp" sourceRef="st-check-if-items-open" targetRef="gw-items-open" />
    <bpmn:serviceTask id="check-items" name="Check Items" camunda:expression="${todoProcessService.testTheProcessService()}">
      <bpmn:incoming>SequenceFlow_16iky1x</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1guxlgj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_11ag7oh" sourceRef="catch-todo-end" targetRef="exclusive-todo-finished" />
    <bpmn:intermediateCatchEvent id="me-item-done" name="Item Done">
      <bpmn:incoming>SequenceFlow_1guxlgj</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0nux7a5</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0zqawc1</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_1mcahbz" />
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="st-check-if-items-open" name="Check If Items Open" camunda:expression="${todoProcessService.checkIfItemsOpen(execution)}">
      <bpmn:incoming>SequenceFlow_0zqawc1</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1htjrmp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="gw-items-open" name="Items Open?">
      <bpmn:incoming>SequenceFlow_1htjrmp</bpmn:incoming>
      <bpmn:outgoing>gw-items-open-yes</bpmn:outgoing>
      <bpmn:outgoing>gw-items-open-no</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="catch-todo-end" name="Todo Finished">
      <bpmn:incoming>gw-items-open-no</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_11ag7oh</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_0a5nmil" />
    </bpmn:intermediateCatchEvent>
    <bpmn:exclusiveGateway id="exclusive-todo-finished" name="Todo finished?">
      <bpmn:incoming>SequenceFlow_11ag7oh</bpmn:incoming>
      <bpmn:outgoing>exclusive-todo-finished-yes</bpmn:outgoing>
      <bpmn:outgoing>exclusive-todo-finished-no</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="exclusive-todo-finished-yes" name="yes" sourceRef="exclusive-todo-finished" targetRef="EndEvent_01ms3wl">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${todoFinished}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0zu1yuy">
      <bpmn:incoming>gw-items-open-yes</bpmn:incoming>
      <bpmn:incoming>exclusive-todo-finished-no</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0nux7a5</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0nux7a5" sourceRef="ExclusiveGateway_0zu1yuy" targetRef="me-item-done" />
    <bpmn:sequenceFlow id="exclusive-todo-finished-no" name="no" sourceRef="exclusive-todo-finished" targetRef="ExclusiveGateway_0zu1yuy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!todoFinished}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmn:message id="Message_1mcahbz" name="item-done" />
  <bpmn:message id="Message_0mdk0pe" name="sub-item-done" />
  <bpmn:message id="Message_0rr4k7j" name="send-sub-item-done" />
  <bpmn:message id="Message_0vraz4g" name="start-sub-item" />
  <bpmn:message id="Message_0a5nmil" name="todo-finished" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1qw6fwu">
      <bpmndi:BPMNShape id="Participant_0hjptyl_di" bpmnElement="pr-service-b-todo" isHorizontal="true">
        <dc:Bounds x="156" y="66" width="1029" height="288" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="start-service-todo">
        <dc:Bounds x="228" y="162" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="202" y="205" width="90" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_16iky1x_di" bpmnElement="SequenceFlow_16iky1x">
        <di:waypoint x="264" y="180" />
        <di:waypoint x="336" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1su4kh3_di" bpmnElement="check-items">
        <dc:Bounds x="336" y="140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1guxlgj_di" bpmnElement="SequenceFlow_1guxlgj">
        <di:waypoint x="436" y="180" />
        <di:waypoint x="496" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Lane_1xv8pyl_di" bpmnElement="Lane_1xv8pyl" isHorizontal="true">
        <dc:Bounds x="186" y="66" width="999" height="288" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_0f55ofz_di" bpmnElement="me-item-done">
        <dc:Bounds x="496" y="162" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="488" y="132" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0zqawc1_di" bpmnElement="SequenceFlow_0zqawc1">
        <di:waypoint x="532" y="180" />
        <di:waypoint x="583" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0ny0qa7_di" bpmnElement="gw-items-open-yes">
        <di:waypoint x="765" y="205" />
        <di:waypoint x="765" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="770" y="238" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_01ms3wl_di" bpmnElement="EndEvent_01ms3wl">
        <dc:Bounds x="1051" y="162" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1rxz1d8_di" bpmnElement="gw-items-open-no">
        <di:waypoint x="790" y="180" />
        <di:waypoint x="853" y="180" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="815" y="162" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1htjrmp_di" bpmnElement="SequenceFlow_1htjrmp">
        <di:waypoint x="683" y="180" />
        <di:waypoint x="740" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0n2yzgb_di" bpmnElement="st-check-if-items-open">
        <dc:Bounds x="583" y="140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_00axw4x_di" bpmnElement="gw-items-open" isMarkerVisible="true">
        <dc:Bounds x="740" y="155" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="733" y="134" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_11ag7oh_di" bpmnElement="SequenceFlow_11ag7oh">
        <di:waypoint x="889" y="180" />
        <di:waypoint x="941" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_1h1bayb_di" bpmnElement="catch-todo-end">
        <dc:Bounds x="853" y="162" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="838" y="205" width="69" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1hxpud7_di" bpmnElement="exclusive-todo-finished" isMarkerVisible="true">
        <dc:Bounds x="941" y="155" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="931" y="125" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0b772im_di" bpmnElement="exclusive-todo-finished-yes">
        <di:waypoint x="991" y="180" />
        <di:waypoint x="1051" y="180" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1012" y="162" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0zu1yuy_di" bpmnElement="ExclusiveGateway_0zu1yuy" isMarkerVisible="true">
        <dc:Bounds x="740" y="270" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0nux7a5_di" bpmnElement="SequenceFlow_0nux7a5">
        <di:waypoint x="740" y="295" />
        <di:waypoint x="514" y="295" />
        <di:waypoint x="514" y="198" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1pbljy8_di" bpmnElement="exclusive-todo-finished-no">
        <di:waypoint x="966" y="205" />
        <di:waypoint x="966" y="295" />
        <di:waypoint x="790" y="295" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="975" y="247" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
